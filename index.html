<!--
CloverPit Companion ‚Äì MVP (Single-File, GitHub Pages-ready)
Autor: Thomas + Assistent
Lizenz: MIT
Hinweis: Rein clientseitig, Speicherung via localStorage. Datenmodell unten leicht erweiterbar.
--><!doctype html>

<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CloverPit Companion</title>
  <meta name="description" content="Tracke Gl√ºcksbringer, Effekte, M√ºnzen & Tickets ‚Äì offlinef√§hig" />
  <style>
    :root{
      --bg:#0b0d10;--panel:#12161b;--ink:#e7edf3;--muted:#9fb0c3;--acc:#39e58c;--warn:#f7c948;
      --red:#ff5c5c;--green:#34d399;--blue:#60a5fa;--shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:16px;--radius-sm:10px;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:radial-gradient(1200px 600px at 10% -10%,#0f1923 0%,#0b0d10 45%),#0b0d10;color:var(--ink)}
    header{position:sticky;top:0;z-index:5;background:rgba(11,13,16,.7);backdrop-filter:blur(8px);border-bottom:1px solid #1e2630}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{margin:0;font-size:22px;letter-spacing:.3px}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:280px 1fr}}
    .panel{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.00));border:1px solid #1e2630;border-radius:var(--radius);box-shadow:var(--shadow)}
    .panel h2{margin:0 0 8px 0;font-size:14px;color:var(--muted);text-transform:uppercase;letter-spacing:.12em}
    .pad{padding:16px}
    .row{display:flex;gap:8px;align-items:center}
    input[type="number"],input[type="text"],select,button,.pill{border-radius:var(--radius-sm);border:1px solid #253140;background:#0f141a;color:var(--ink);padding:10px 12px}
    input[type="number"]{width:100px}
    button{cursor:pointer}
    .btn{padding:10px 14px;border:1px solid #243041;background:#16212e}
    .btn.primary{background:linear-gradient(180deg,#2ddc7a,#1fb167);border-color:#1ea564;color:#0b0d10;font-weight:600}
    .btn.ghost{background:transparent}
    .tag{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:#0f141a;border:1px solid #243041;color:var(--muted);font-size:12px}
    .list{display:grid;gap:10px}
    .card{display:grid;grid-template-columns:1fr auto;gap:8px;padding:12px;border-radius:14px;border:1px solid #1f2937;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.00))}
    .name{font-weight:700}
    .effect{color:var(--muted)}
    .own{accent-color:var(--acc);width:20px;height:20px}
    .rar{font-size:12px;color:#bcd}
    .pill{font-size:12px}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap}
    .footer{opacity:.7;font-size:12px;margin-top:8px}
    .kpi{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    .kpi .box{padding:12px;border:1px solid #1f2937;border-radius:12px;background:#0f141a}
    .kpi label{display:block;color:var(--muted);font-size:12px;margin-bottom:6px}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
  </style>
</head>
<body>
  <header>
    <div class="wrap row" style="justify-content:space-between">
      <h1>üçÄ CloverPit Companion</h1>
      <div class="row">
        <button class="btn ghost" id="exportBtn">Export</button>
        <button class="btn" id="importBtn">Import</button>
        <input type="file" id="fileInput" accept="application/json" hidden>
        <button class="btn primary" id="resetBtn" title="Alles zur√ºcksetzen">Reset</button>
      </div>
    </div>
  </header>  <main class="wrap grid">
    <!-- Linke Spalte: Konten & Filter -->
    <section class="panel pad">
      <h2>Bestand</h2>
      <div class="kpi">
        <div class="box"><label>M√ºnzen</label><input type="number" id="coins" min="0" step="1"/></div>
        <div class="box"><label>Tickets</label><input type="number" id="tickets" min="0" step="1"/></div>
      </div>
      <div class="footer">Werte werden lokal gespeichert (offlinef√§hig).</div><hr style="border-color:#1e2630;margin:16px 0">
  <h2>Filter</h2>
  <div class="toolbar">
    <input type="text" id="search" placeholder="Suche Name/Effekt‚Ä¶" />
    <select id="rarity">
      <option value="">Seltenheit ‚Äì alle</option>
      <option>Common</option>
      <option>Uncommon</option>
      <option>Rare</option>
      <option>Epic</option>
      <option>Legendary</option>
    </select>
    <select id="tag">
      <option value="">Tag ‚Äì alle</option>
      <option value="red-button">Red‚ÄëButton</option>
      <option value="golden-mod">Golden‚ÄëMod</option>
      <option value="tickets">Tickets</option>
      <option value="energy">Energy</option>
      <option value="interest">Interest</option>
      <option value="random">Random‚ÄëTrigger</option>
      <option value="patterns">Pattern‚ÄëScaling</option>
    </select>
    <label class="tag"><input type="checkbox" id="ownedOnly"> nur Besitz</label>
  </div>
</section>

<!-- Rechte Spalte: Liste -->
<section class="panel pad">
  <h2>Gl√ºcksbringer</h2>
  <div id="stats" class="footer"></div>
  <div class="list" id="list"></div>
</section>

  </main>  <script>
  // --- Datenmodell ---------------------------------------------------------
  /**
   * Charm Schema
   * id: string (slug)
   * name: string (Original-Ingame)
   * effect: string (Kurzbeschreibung DE)
   * tickets: number (Kosten in Tickets)
   * rarity: 'Common'|'Uncommon'|'Rare'|'Epic'|'Legendary' (heuristisch; kann angepasst werden)
   * tags: string[] (Filter/Mechanik)
   * source: string (Referenztext)
   */
  const CHARMS = [
    {id:'bell-picture', name:'Bell Picture', tickets:4, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr Glocken (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'car-battery', name:'Car Battery', tickets:1, rarity:'Rare', tags:['energy'], effect:'Belegt keinen Platz. Stellt alle Energy‚ÄëLadungen auf Red‚ÄëButton‚ÄëCharms wieder her.', source:'PlayerAuctions'},
    {id:'cat-food', name:'Cat Food', tickets:4, rarity:'Rare', tags:['spins'], effect:'+2 Spins pro Runde.', source:'PlayerAuctions'},
    {id:'cherry-picture', name:'Cherry Picture', tickets:4, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr Kirschen (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'clover-picture', name:'Clover Picture', tickets:4, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr Kleebl√§tter (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'clover-voucher', name:'Clover Voucher', tickets:2, rarity:'Epic', tags:['tickets'], effect:'Belegt keinen Platz. Gew√§hrt sofort 4 Tickets.', source:'PlayerAuctions'},
    {id:'cloverpet', name:'Cloverpet', tickets:2, rarity:'Rare', tags:['multiplier','tickets'], effect:'Symbol‚ÄëMultiplikator +1 je 5 Tickets im Besitz.', source:'PlayerAuctions'},
    {id:'cloverpot', name:'Cloverpot', tickets:2, rarity:'Rare', tags:['tickets','interest'], effect:'Am Ende jeder Deadline: +1 Ticket je 3 vorhandene (max 10).', source:'PlayerAuctions'},
    {id:'coins-picture', name:'Coins Picture', tickets:3, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr M√ºnzen (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'diamond-picture', name:'Diamond Picture', tickets:3, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr Diamanten (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'fake-coin', name:'Fake Coin', tickets:2, rarity:'Rare', tags:['random','spins','luck'], effect:'10% zuf√§llig: +1 Extra‚ÄëSpin, danach Luck +4 f√ºr diesen Spin.', source:'PlayerAuctions'},
    {id:'golden-bell', name:'Golden Bell', tickets:2, rarity:'Common', tags:['golden-mod','symbols-bias'], effect:'Glocken erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'golden-cherry', name:'Golden Cherry', tickets:2, rarity:'Common', tags:['golden-mod','symbols-bias'], effect:'Kirschen erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'golden-clover', name:'Golden Clover', tickets:2, rarity:'Common', tags:['golden-mod','symbols-bias'], effect:'Kleebl√§tter erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'golden-coins', name:'Golden Coins', tickets:3, rarity:'Uncommon', tags:['golden-mod','symbols-bias'], effect:'M√ºnzen erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'golden-diamonds', name:'Golden Diamonds', tickets:3, rarity:'Uncommon', tags:['golden-mod','symbols-bias'], effect:'Diamanten erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'golden-lemon', name:'Golden Lemon', tickets:2, rarity:'Common', tags:['golden-mod','symbols-bias'], effect:'Zitronen erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'golden-seven', name:'Golden Seven', tickets:3, rarity:'Uncommon', tags:['golden-mod','symbols-bias'], effect:'Sieben erscheinen +20% h√§ufiger mit Golden‚ÄëMod.', source:'PlayerAuctions'},
    {id:'grandmas-purse', name:"Grandma's Purse", tickets:3, rarity:'Rare', tags:['interest'], effect:'Zinsen +15%, sinken nach jeder Runde um 3%. Entfernt sich bei 0.', source:'PlayerAuctions'},
    {id:'green-pepper', name:'Green Pepper', tickets:2, rarity:'Common', tags:['random','luck','charges'], effect:'15% zuf√§llig: Luck +7 f√ºr aktuellen Spin. Entfernt sich nach 9 Ausl√∂sungen.', source:'PlayerAuctions'},
    {id:'hamsa', name:'Hamsa', tickets:3, rarity:'Uncommon', tags:['luck'], effect:'Luck +7 beim letzten Spin einer Runde.', source:'PlayerAuctions'},
    {id:'holy-bible', name:'Holy Bible', tickets:1, rarity:'Common', tags:['safety'], effect:'Wenn 666 ausl√∂sen w√ºrde: in normale Symbole wandeln und Charm entfernen.', source:'PlayerAuctions'},
    {id:'horseshoe', name:'Horseshoe', tickets:3, rarity:'Uncommon', tags:['random'], effect:'"Triggers Randomly"‚ÄëEffekte treten doppelt so oft auf.', source:'PlayerAuctions'},
    {id:'lemon-picture', name:'Lemon Picture', tickets:4, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr Zitronen (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'lost-briefcase', name:'Lost Briefcase', tickets:2, rarity:'Rare', tags:['coins'], effect:'Belegt keinen Platz. Sofort +30% der aktuellen Schuld als Geld.', source:'PlayerAuctions'},
    {id:'lucky-cat', name:'Lucky Cat', tickets:1, rarity:'Rare', tags:['interest','patterns'], effect:'Bei ‚â•3 Patterns im Spin: Geld in H√∂he der aktuellen Zinsen.', source:'PlayerAuctions'},
    {id:'megaphone', name:'Megaphone', tickets:7, rarity:'Legendary', tags:['red-button','energy'], effect:'Alle roten Telefon‚ÄëF√§higkeiten doppelt. Charm‚ÄëSlots ‚àí1.', source:'PlayerAuctions'},
    {id:'nuclear-button', name:'Nuclear Button', tickets:3, rarity:'Legendary', tags:['red-button'], effect:'Alle Red‚ÄëButton‚ÄëCharms l√∂sen einmal zus√§tzlich aus. Charm‚ÄëSlots ‚àí1.', source:'PlayerAuctions'},
    {id:'number-1', name:'Number 1', tickets:3, rarity:'Epic', tags:['red-button','patterns','energy'], effect:'Red‚ÄëButton: Gelbe Symbol‚ÄëPatterns l√∂sen 1√ó zus√§tzlich aus. +1 Energy am Deadline‚ÄëEnde.', source:'PlayerAuctions'},
    {id:'number-2', name:'Number 2', tickets:3, rarity:'Epic', tags:['red-button','patterns','energy'], effect:'Red‚ÄëButton: Nicht‚Äëgelbe Symbol‚ÄëPatterns l√∂sen 1√ó zus√§tzlich aus. +1 Energy am Deadline‚ÄëEnde.', source:'PlayerAuctions'},
    {id:'pentacle', name:'Pentacle', tickets:3, rarity:'Rare', tags:['multiplier','patterns'], effect:'Symbol‚ÄëMultiplikator +1; +1 extra, wenn ‚â•5 Patterns im Spin ausl√∂sen.', source:'PlayerAuctions'},
    {id:'raging-capitalist', name:'Raging Capitalist', tickets:4, rarity:'Epic', tags:['tickets'], effect:'+2% Chance auf Ticket‚ÄëMod pro Symbol; +1% je Charm‚ÄëKauf (max 25%).', source:'PlayerAuctions'},
    {id:'red-pepper', name:'Red Pepper', tickets:1, rarity:'Common', tags:['random','luck','charges'], effect:'20% zuf√§llig: Luck +5 f√ºr aktuellen Spin. Entfernt sich nach 12 Ausl√∂sungen.', source:'PlayerAuctions'},
    {id:'red-shiny-rock', name:'Red Shiny Rock', tickets:1, rarity:'Common', tags:['red-button','luck','energy'], effect:'Red‚ÄëButton (3/3 Energy): Luck +4 f√ºr den n√§chsten Spin. +1 Energy am Rundenende.', source:'PlayerAuctions'},
    {id:'seven-picture', name:'Seven Picture', tickets:3, rarity:'Uncommon', tags:['red-button','energy','symbols-bias'], effect:'Red‚ÄëButton: Mehr Sieben (+2) in dieser Runde. Am Deadline‚ÄëEnde +1 Energy.', source:'PlayerAuctions'},
    {id:'shrooms', name:'Shrooms', tickets:2, rarity:'Rare', tags:['patterns','multiplier'], effect:'Bei ‚â•3 Patterns im Spin: Alle Symbolwerte bis Rundenende verdoppelt.', source:'PlayerAuctions'},
    {id:'stain', name:'Stain', tickets:1, rarity:'Uncommon', tags:['patterns'], effect:'Bei ‚â•3 Patterns im Spin: Alle Pattern‚ÄëWerte um ihren Basiswert erh√∂hen (bis Rundenende).', source:'PlayerAuctions'},
    {id:'stonks', name:'Stonks', tickets:2, rarity:'Uncommon', tags:['interest'], effect:'Zinsen +5%.', source:'PlayerAuctions'},
    {id:'tarot-deck', name:'Tarot Deck', tickets:1, rarity:'Uncommon', tags:['multiplier','random'], effect:'Start Multiplikator 0; +1 wenn ein Charm im Spin triggert; Reset auf 0, falls nichts triggert.', source:'PlayerAuctions'},
    {id:'toy-train', name:'Toy Train', tickets:2, rarity:'Uncommon', tags:['luck'], effect:'Wenn die letzten 2 Spins keinen Reward gaben: +5 Luck f√ºr den n√§chsten Spin.', source:'PlayerAuctions'}
  ];

  // --- Persistenz ----------------------------------------------------------
  const store = {
    load(){
      try{ return JSON.parse(localStorage.getItem('cpit')||'{}'); }catch{return {}};
    },
    save(data){ localStorage.setItem('cpit', JSON.stringify(data)); }
  };

  const state = Object.assign({ coins:0, tickets:0, owned:{}, filters:{q:'',rarity:'',tag:'',ownedOnly:false} }, store.load());

  // --- UI Binding ----------------------------------------------------------
  const $ = sel => document.querySelector(sel);
  const listEl = $('#list');
  const statsEl = $('#stats');

  $('#coins').value = state.coins; $('#tickets').value = state.tickets;
  $('#coins').addEventListener('input', e=>{ state.coins = +e.target.value||0; sync(); });
  $('#tickets').addEventListener('input', e=>{ state.tickets = +e.target.value||0; sync(); });

  $('#search').value = state.filters.q; $('#rarity').value = state.filters.rarity; $('#tag').value = state.filters.tag; $('#ownedOnly').checked = state.filters.ownedOnly;
  $('#search').addEventListener('input', e=>{ state.filters.q = e.target.value.trim().toLowerCase(); render(); sync(); });
  $('#rarity').addEventListener('change', e=>{ state.filters.rarity = e.target.value; render(); sync(); });
  $('#tag').addEventListener('change', e=>{ state.filters.tag = e.target.value; render(); sync(); });
  $('#ownedOnly').addEventListener('change', e=>{ state.filters.ownedOnly = e.target.checked; render(); sync(); });

  $('#resetBtn').addEventListener('click', ()=>{
    if(confirm('Alles zur√ºcksetzen?')){ localStorage.removeItem('cpit'); location.reload(); }
  });

  $('#exportBtn').addEventListener('click', ()=>{
    const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = Object.assign(document.createElement('a'), {href:url, download:'cloverpit-companion.json'});
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });
  $('#importBtn').addEventListener('click', ()=> $('#fileInput').click());
  $('#fileInput').addEventListener('change', e=>{
    const file = e.target.files?.[0]; if(!file) return;
    const reader = new FileReader();
    reader.onload = ()=>{
      try{
        const data = JSON.parse(reader.result);
        Object.assign(state, data);
        $('#coins').value = state.coins; $('#tickets').value = state.tickets;
        render(); sync();
      }catch{ alert('Ung√ºltige JSON-Datei.'); }
    };
    reader.readAsText(file);
  });

  function sync(){ store.save(state); updateStats(); }

  function updateStats(){
    const ownedCount = Object.values(state.owned).filter(Boolean).length;
    statsEl.textContent = `${ownedCount}/${CHARMS.length} besessen ¬∑ Tickets: ${state.tickets} ¬∑ M√ºnzen: ${state.coins}`;
  }

  function render(){
    const q = state.filters.q; const rar = state.filters.rarity; const tag = state.filters.tag; const ownedOnly = state.filters.ownedOnly;
    const items = CHARMS.filter(c=>{
      if(rar && c.rarity!==rar) return false;
      if(tag && !(c.tags||[]).includes(tag)) return false;
      if(q){ const hay = (c.name+' '+c.effect).toLowerCase(); if(!hay.includes(q)) return false; }
      if(ownedOnly && !state.owned[c.id]) return false;
      return true;
    }).sort((a,b)=> a.name.localeCompare(b.name));

    listEl.innerHTML = '';
    for(const c of items){
      const card = document.createElement('div'); card.className = 'card';
      const left = document.createElement('div');
      const nm = document.createElement('div'); nm.className='name'; nm.textContent = c.name;
      const fx = document.createElement('div'); fx.className='effect'; fx.textContent = c.effect;
      const meta = document.createElement('div'); meta.className='rar'; meta.innerHTML = `üéüÔ∏è ${c.tickets} ¬∑ Seltenheit: ${c.rarity} ¬∑ ${c.tags.map(t=>`<span class="pill">${t}</span>`).join(' ')}`;
      left.appendChild(nm); left.appendChild(fx); left.appendChild(meta);

      const right = document.createElement('label'); right.className='row'; right.title='Im Besitz?';
      const chk = document.createElement('input'); chk.type='checkbox'; chk.className='own'; chk.checked = !!state.owned[c.id];
      chk.addEventListener('change', e=>{ state.owned[c.id] = e.target.checked; sync(); });
      const txt = document.createElement('span'); txt.textContent='Besitz'; txt.style.color='var(--muted)'; txt.style.fontSize='12px';
      right.appendChild(chk); right.appendChild(txt);

      card.appendChild(left); card.appendChild(right);
      listEl.appendChild(card);
    }
    updateStats();
  }

  render();
  </script></body>
  </html>
