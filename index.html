<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1" />
  <title>CloverPit Companion</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="hdr">
    <div class="wrap row space">
      <h1>üçÄ CloverPit Companion</h1>
    </div>
  </header>

  <main class="wrap grid">
    <section class="panel pad">
      <h2>Gl√ºcksbringer</h2>
      <div id="stats" class="footer"></div>
      <ul id="charmList" class="charm-list"></ul>
    </section>
  </main>

<script>
const CHARMS = [
  {id:'bell-picture', name:'Bell Picture', effect:'Mehr Glocken (+2) in dieser Runde. +1 Energy.'},
  {id:'car-battery', name:'Car Battery', effect:'Stellt alle Energy-Ladungen auf Red-Button-Charms wieder her.'},
  {id:'cat-food', name:'Cat Food', effect:'+2 Spins pro Runde.'},
  {id:'cherry-picture', name:'Cherry Picture', effect:'Mehr Kirschen (+2) in dieser Runde. +1 Energy.'}
];

const state = JSON.parse(localStorage.getItem('cpit')||'{}');
state.owned = state.owned||{};

const listEl = document.getElementById('charmList');

function render(){
  listEl.innerHTML = '';
  for(const c of CHARMS){
    const li = document.createElement('li');
    li.className = 'charm-item';
    const label = document.createElement('label');
    label.className = 'row space';
    const chk = document.createElement('input');
    chk.type = 'checkbox';
    chk.checked = !!state.owned[c.id];
    chk.addEventListener('change', e=>{ state.owned[c.id]=chk.checked; save(); });
    const text = document.createElement('span');
    text.textContent = c.name + ' ‚Äì ' + c.effect;
    label.appendChild(chk); label.appendChild(text);
    li.appendChild(label);
    listEl.appendChild(li);
  }
  document.getElementById('stats').textContent = Object.values(state.owned).filter(Boolean).length + '/' + CHARMS.length + ' besessen';
}

function save(){
  localStorage.setItem('cpit', JSON.stringify(state));
  render();
}

render();
</script>
</body>
</html>
